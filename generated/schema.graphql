schema {
  mutation: JetPluginMutation
  query: JetPluginQuery
}

"""
Issued when an argument of unexpected format is received.
For example, a field `email` of type `string` expected an email
address is filled out with a malformed string like `"foobar"`.
"""
type JetPluginCallbackResponseArgumentError implements JetPluginCallbackResponse {
  message: String
  extensions: String
  invalidArgument: String!
  expected: String!
}

type JetPluginInfo {
  description: String
  version: String!
}

type JetPluginQuery {
  jetPluginHealthCheck: JetPluginCallbackResponse
}

enum JetProjectEnv {
  DEVELOPMENT
  PRODUCTION
}

type JetPluginInitializeResponse {
  info: JetPluginInfo!
}

interface JetPluginCallbackResponse {
  message: String

  "Arbitrary serialized JSON data."
  extensions: String
}

type JetPluginMutation {
  """
  Called when the plugin is discovered by Jet. The plugin should respond
  immediately with plugin info and calls Jet's `plugin_initialized` api
  to finish initialization.
  """
  jetPluginInitialize(
    jetApiEndpoint: String!

    """
    All calls to Jet's APIs require this access_key. So it should be
    persisted to local storage of the plugin.
    """
    accessKey: String!
  ): JetPluginInitializeResponse

  "Called when the plugin is enabled by a project."
  jetPluginEnable(projectId: String!, env: JetProjectEnv!): JetPluginCallbackResponse

  "Called when the plugin is disabled by a project."
  jetPluginDisable(projectId: String!, env: JetProjectEnv!): JetPluginCallbackResponse
}

type JetPluginCallbackResponseOk implements JetPluginCallbackResponse {
  message: String
  extensions: String
}
